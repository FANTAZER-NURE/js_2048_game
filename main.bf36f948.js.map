{"version":3,"sources":["scripts/main.js"],"names":["board","score","rows","cols","generateBoard","r","c","cell","document","createElement","id","updateCell","querySelector","append","start","addFirstTwoCells","addEventListener","trackKey","restart","classList","add","clearField","win","remove","removeEventListener","i","prevRow","prevCol","row","getRandomInt","col","getElementById","textContent","e","code","hasSpace","moveLeft","generateCell","moveRight","moveUp","moveDown","num","value","slide","argRow","length","newRow","filter","el","reverse","map","max","Math","floor","random","generateTenPercentNumber","arr","bool","window","onload"],"mappings":"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","file":"main.bf36f948.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nlet board;\nlet score = 0;\nconst rows = 4;\nconst cols = 4;\n\ndocument.querySelector('.start')\n  .addEventListener('click', () => {\n    document.querySelector('.start').textContent = 'Restart';\n    document.querySelector('button').classList.add('restart');\n    document.querySelector('.start').classList.remove('start');\n    document.querySelector('.message-start').classList.add('hidden');\n    start();\n  });\n\nfunction generateBoard() {\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < cols; c++) {\n      const cell = document.createElement('div');\n\n      cell.id = `${r}-${c}`;\n\n      const num = board[r][c];\n\n      updateCell(cell, num);\n\n      document.querySelector('.game-field').append(cell);\n    }\n  }\n}\n\nfunction start() {\n  addFirstTwoCells();\n\n  document.addEventListener('keyup', trackKey);\n}\n\nfunction restart() {\n  document.querySelector('.restart')\n    .addEventListener('click', () => {\n      score = 0;\n      document.querySelector('.message-lose').classList.add('hidden');\n      document.querySelector('.message-win').classList.add('hidden');\n      clearField();\n      start();\n    });\n}\n\nfunction win() {\n  document.querySelector('.message-win').classList.remove('hidden');\n  document.removeEventListener('keyup', trackKey);\n  restart();\n}\n\nfunction addFirstTwoCells() {\n  for (let i = 0; i < 2; i++) {\n    let prevRow = -1;\n    let prevCol = -1;\n    const row = getRandomInt(4);\n    const col = getRandomInt(4);\n\n    if (col === prevCol && row === prevRow) {\n      i--;\n      continue;\n    }\n\n    board[row][col] = 2;\n\n    const cell = document.getElementById(`${row}-${col}`);\n\n    cell.classList.add('.field-cell--2');\n\n    updateCell(cell, 2);\n\n    prevRow = row;\n    prevCol = col;\n  }\n}\n\nconst trackKey = (e) => {\n  switch (e.code) {\n    case 'ArrowLeft':\n      if (!hasSpace()) {\n        document.querySelector('.message-lose').classList.remove('hidden');\n\n        restart();\n        break;\n      }\n\n      moveLeft();\n      generateCell();\n      break;\n\n    case 'ArrowRight':\n      if (!hasSpace()) {\n        document.querySelector('.message-lose').classList.remove('hidden');\n\n        restart();\n        break;\n      }\n\n      moveRight();\n      generateCell();\n      break;\n\n    case 'ArrowUp':\n      if (!hasSpace()) {\n        document.querySelector('.message-lose').classList.remove('hidden');\n\n        restart();\n        break;\n      }\n\n      moveUp();\n      generateCell();\n      break;\n\n    case 'ArrowDown':\n      if (!hasSpace()) {\n        document.querySelector('.message-lose').classList.remove('hidden');\n\n        restart();\n        break;\n      }\n\n      moveDown();\n      generateCell();\n      break;\n  }\n  document.querySelector('.game-score').textContent = score;\n};\n\nfunction clearField() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < cols; c++) {\n      board[r][c] = 0;\n\n      const cell = document.getElementById(`${r}-${c}`);\n\n      updateCell(cell, 0);\n    }\n  }\n}\n\nfunction updateCell(cell, num) {\n  cell.classList.value = '';\n  cell.textContent = (num === 0) ? ' ' : `${num}`;\n  cell.classList.add('field-cell');\n  cell.classList.add(`field-cell--${num}`);\n}\n\nfunction slide(argRow) {\n  const row = argRow;\n\n  for (let i = 0; i < row.length - 1; i++) {\n    if (row[i] === row[i + 1]) {\n      row[i] *= 2;\n      row[i + 1] = 0;\n      score += row[i];\n    }\n  }\n\n  const newRow = row.filter(el => el !== 0);\n\n  for (let i = 0; i < rows; i++) {\n    if (!newRow[i]) {\n      newRow[i] = 0;\n    }\n  }\n\n  return newRow;\n}\n\nfunction moveLeft() {\n  for (let r = 0; r < rows; r++) {\n    let row = board[r].filter(el => el !== 0);\n\n    row = slide(row);\n\n    board[r] = row;\n\n    for (let c = 0; c < cols; c++) {\n      const cell = document.getElementById(`${r}-${c}`);\n\n      const num = board[r][c];\n\n      updateCell(cell, num);\n\n      if (board[r][c] === 2048) {\n        win();\n      }\n    }\n  }\n}\n\nfunction moveRight() {\n  for (let r = 0; r < rows; r++) {\n    let row = board[r].filter(el => el !== 0);\n\n    row.reverse();\n\n    row = slide(row);\n\n    board[r] = row.reverse();\n\n    for (let c = 0; c < cols; c++) {\n      const cell = document.getElementById(`${r}-${c}`);\n\n      const num = board[r][c];\n\n      updateCell(cell, num);\n\n      if (board[r][c] === 2048) {\n        win();\n      }\n    }\n  }\n}\n\nfunction moveUp() {\n  for (let c = 0; c < cols; c++) {\n    let col = board.map(row => row[c]);\n\n    col = slide(col);\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = col[r];\n\n      const cell = document.getElementById(`${r}-${c}`);\n\n      const num = board[r][c];\n\n      updateCell(cell, num);\n\n      if (board[r][c] === 2048) {\n        win();\n      }\n    }\n  }\n}\n\nfunction moveDown() {\n  for (let c = 0; c < cols; c++) {\n    let col = board.map(row => row[c]);\n\n    col = col.reverse();\n\n    col = slide(col);\n\n    col = col.reverse();\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = col[r];\n\n      const cell = document.getElementById(`${r}-${c}`);\n\n      const num = board[r][c];\n\n      updateCell(cell, num);\n\n      if (board[r][c] === 2048) {\n        win();\n      }\n    }\n  }\n}\n\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\nfunction hasSpace() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < cols; c++) {\n      if (!board[r][c]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction generateTenPercentNumber() {\n  const arr = [];\n\n  for (let i = 0; i < 10; i++) {\n    arr[i] = 4;\n  }\n\n  for (let i = 10; i < 100; i++) {\n    arr[i] = 2;\n  }\n\n  const index = getRandomInt(100);\n\n  return arr[index];\n}\n\nfunction generateCell() {\n  if (!hasSpace()) {\n    return;\n  }\n\n  let bool = false;\n\n  while (!bool) {\n    const col = getRandomInt(4);\n    const row = getRandomInt(4);\n\n    if (board[row][col] === 0) {\n      const cell = document.getElementById(`${row}-${col}`);\n\n      const num = generateTenPercentNumber();\n\n      board[row][col] = num;\n      cell.textContent = num;\n      cell.classList.add(`field-cell--${num}`);\n      bool = true;\n    }\n  }\n}\n\nwindow.onload = generateBoard();\n"]}